
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../kubectlplugin/">
      
      
        <link rel="next" href="../namespace_as_a_service/">
      
      
      <link rel="icon" href="../assets/favicon.ico">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.17">
    
    
      
        <title>Multi Cluster SSO - Kubernetes Authentication and SSO - OpenUnison</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.bcfcd587.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#multi-cluster-sso" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Kubernetes Authentication and SSO - OpenUnison" class="md-header__button md-logo" aria-label="Kubernetes Authentication and SSO - OpenUnison" data-md-component="logo">
      
  <img src="../assets/ts-logo-white.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Kubernetes Authentication and SSO - OpenUnison
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Multi Cluster SSO
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Kubernetes Authentication and SSO - OpenUnison" class="md-nav__button md-logo" aria-label="Kubernetes Authentication and SSO - OpenUnison" data-md-component="logo">
      
  <img src="../assets/ts-logo-white.png" alt="logo">

    </a>
    Kubernetes Authentication and SSO - OpenUnison
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Kubernetes Authentication and SSO
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../deployauth/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Deploying The Authentication Portal
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../getting-help/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Help
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../javascript/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Customizing OpenUnison with JavaScript
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../kube-sts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Kubernetes Security Token Service
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../kubectlplugin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Kubectl Plugin
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Multi Cluster SSO
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Multi Cluster SSO
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#centralized-authentication" class="md-nav__link">
    <span class="md-ellipsis">
      Centralized Authentication
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Centralized Authentication">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#manual-configuration-steps" class="md-nav__link">
    <span class="md-ellipsis">
      Manual Configuration Steps
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#links-only" class="md-nav__link">
    <span class="md-ellipsis">
      Links Only
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Links Only">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-satelite-clusters-to-namespace-as-a-service" class="md-nav__link">
    <span class="md-ellipsis">
      Adding Satelite Clusters to Namespace as a Service
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../namespace_as_a_service/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Namespace as a Service
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../priv_access/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Privileged Access Management
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../upgrading/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Upgrading from 1.0.23 and Earlier
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11" >
        
          
          <label class="md-nav__link" for="__nav_11" id="__nav_11_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Applications
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11">
            <span class="md-nav__icon md-icon"></span>
            Applications
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../applications/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Well Known Applications
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../applications/argoworkflow/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Argo Workflows
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../applications/drupal/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Drupal
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../applications/entraid/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    EntraID / AzureAD
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../applications/github/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    GitHub
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../applications/gitlab/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    GitLab
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../applications/grafana/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Grafana Community Edition
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../applications/kiali/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Kiali
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../applications/kubeapps/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    VMware Kubeapps
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../applications/kubernetes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Kubernetes Integration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../applications/openshift/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OpenShift
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../applications/vault/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hashicorp Vault
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12" >
        
          
          <label class="md-nav__link" for="__nav_12" id="__nav_12_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Customization
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12">
            <span class="md-nav__icon md-icon"></span>
            Customization
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../customization/custom_jit_workflow/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Customized Just-In-Time Login Workflow
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../customization/custom_logos/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Custom Logos
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../customization/custom_provisioning_tasks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Custom Provisioning Tasks
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../customization/resource_management_sheduling/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Resource Management and Scheduling
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../customization/themes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Themes and Colors
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_13" >
        
          
          <label class="md-nav__link" for="__nav_13" id="__nav_13_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Documentation
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_13">
            <span class="md-nav__icon md-icon"></span>
            Documentation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../documentation/configuring-openunison/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuring OpenUnison Applications
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../documentation/custom-sso/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Custom SSO
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../documentation/customize-naas-onboarding/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Customizing the NaaS Onboarding Workflow
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../documentation/kerberos/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Kerberos Support
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../documentation/login-portal/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Login Portal
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../documentation/naas/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Namespace as a Service Portal
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../documentation/operational-processes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Operational Processes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../documentation/ouctl/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ouctl
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_13_9" >
        
          
          <label class="md-nav__link" for="__nav_13_9" id="__nav_13_9_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Apis
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_13_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_13_9">
            <span class="md-nav__icon md-icon"></span>
            Apis
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../documentation/apis/apis/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OpenUnison's APIs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../documentation/apis/restful/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OpenUnison RESTful APIs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_13_9_3" >
        
          
          <label class="md-nav__link" for="__nav_13_9_3" id="__nav_13_9_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Callworkflow
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_13_9_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_13_9_3">
            <span class="md-nav__icon md-icon"></span>
            Callworkflow
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../documentation/apis/callworkflow/callworkflow/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CallWorkflow
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_13_9_4" >
        
          
          <label class="md-nav__link" for="__nav_13_9_4" id="__nav_13_9_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Scalejs
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_13_9_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_13_9_4">
            <span class="md-nav__icon md-icon"></span>
            Scalejs
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_13_9_4_1" >
        
          
          <label class="md-nav__link" for="__nav_13_9_4_1" id="__nav_13_9_4_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Register
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_13_9_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_13_9_4_1">
            <span class="md-nav__icon md-icon"></span>
            Register
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../documentation/apis/scalejs/register/scalejs-register/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ScaleJS Register
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_13_10" >
        
          
          <label class="md-nav__link" for="__nav_13_10" id="__nav_13_10_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Javadocs
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_13_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_13_10">
            <span class="md-nav__icon md-icon"></span>
            Javadocs
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../documentation/javadocs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    JavaDocs for OpenUnison
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_13_10_2" >
        
          
          <label class="md-nav__link" for="__nav_13_10_2" id="__nav_13_10_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    1.0.42
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_13_10_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_13_10_2">
            <span class="md-nav__icon md-icon"></span>
            1.0.42
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_13_10_2_1" >
        
          
          <label class="md-nav__link" for="__nav_13_10_2_1" id="__nav_13_10_2_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Legal
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_13_10_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_13_10_2_1">
            <span class="md-nav__icon md-icon"></span>
            Legal
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../documentation/javadocs/1.0.42/legal/dejavufonts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dejavufonts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../documentation/javadocs/1.0.42/legal/jquery/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Jquery
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../documentation/javadocs/1.0.42/legal/jqueryUI/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    jqueryUI
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_13_11" >
        
          
          <label class="md-nav__link" for="__nav_13_11" id="__nav_13_11_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Reference
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_13_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_13_11">
            <span class="md-nav__icon md-icon"></span>
            Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../documentation/reference/authentication-mechanisms/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Authentication Mechanisms
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../documentation/reference/custom-authorizations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Custom Authorizations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../documentation/reference/custom-results/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Custom Results
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../documentation/reference/custom-tasks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Provisioning Custom Tasks
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../documentation/reference/filters/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Application URL Filters
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../documentation/reference/jobs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Scheduled Jobs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../documentation/reference/openunison-crds/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OpenUnison Kubernetes CRD Documentation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../documentation/reference/operator/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Operator Helm Chart Customization
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../documentation/reference/provisioning-tasks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Provisioning Tasks
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../documentation/reference/targets/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Provisioning Targets
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_14" >
        
          
          <label class="md-nav__link" for="__nav_14" id="__nav_14_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Identity providers
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_14_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_14">
            <span class="md-nav__icon md-icon"></span>
            Identity providers
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../identity%20providers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    List of Documented Identity Providers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../identity%20providers/azuread/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    EntraID / AzureAD
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../identity%20providers/keycloak/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Keycloak
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../identity%20providers/okta/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Okta
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_15" >
        
          
          <label class="md-nav__link" for="__nav_15" id="__nav_15_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Ingresses
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_15_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_15">
            <span class="md-nav__icon md-icon"></span>
            Ingresses
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ingresses/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    List of Documented Ingress Controllers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ingresses/f5nginx/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    F5 NGINX Integration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ingresses/istio/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Istio Integration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ingresses/nginx/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    NGINX Integration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ingresses/traefik/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Traefik
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_16" >
        
          
          <label class="md-nav__link" for="__nav_16" id="__nav_16_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Knowledgebase
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_16_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_16">
            <span class="md-nav__icon md-icon"></span>
            Knowledgebase
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../knowledgebase/airgap/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Air-Gap Implementation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../knowledgebase/broken_dashboard/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Broken Dashboard Login
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../knowledgebase/certificates/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Certificate Management
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../knowledgebase/customizingmyvd/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Customizing MyVirtualDirectory
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../knowledgebase/orchestra_deployment_failed/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Failed Orchestra Deployment
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../knowledgebase/prometheus/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Monitoring OpenUnison with Prometheus
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../knowledgebase/sessions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Session Management
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#centralized-authentication" class="md-nav__link">
    <span class="md-ellipsis">
      Centralized Authentication
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Centralized Authentication">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#manual-configuration-steps" class="md-nav__link">
    <span class="md-ellipsis">
      Manual Configuration Steps
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#links-only" class="md-nav__link">
    <span class="md-ellipsis">
      Links Only
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Links Only">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-satelite-clusters-to-namespace-as-a-service" class="md-nav__link">
    <span class="md-ellipsis">
      Adding Satelite Clusters to Namespace as a Service
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="multi-cluster-sso">Multi Cluster SSO</h1>
<p>OpenUnison can provide a central authentication point for all of your clusters, not just a single one.  There are two options:</p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Advantages</th>
<th>Disadvantages</th>
</tr>
</thead>
<tbody>
<tr>
<td>Have all clusters authenticate to a single OpenUnison</td>
<td>Only one trust needed with your identity provider, more control over your clusters</td>
<td>A "control plane" cluster becomes a single point of failure</td>
</tr>
<tr>
<td>Have each OpenUnison authenticate directly to an identity provider, but have the central openunison provide portal links</td>
<td>No single point of failure</td>
<td>Each cluster needs a trust with the identity provider</td>
</tr>
</tbody>
</table>
<p>Which direction you take will depend on your situation.  If you have control over your identity provider, option 2 is often preferable to 
eliminate a single point of failure.  If you don't have control over your identity provider, or your identity provider doesn't have an api
for onboarding new trusts, option 1 can be a good choice. </p>
<p>In both scenarios the steps are similar:</p>
<ol>
<li>Configure your central orchestra portal</li>
<li>Deploy orchestra to the cluster using the appropriate authentication mechanism</li>
</ol>
<h2 id="centralized-authentication">Centralized Authentication</h2>
<p>The first step is to enable the tree on the front page of the portal to make it easier to navigate which cluster to access.  In your control plane OpenUnison values.yaml,
add <code>SHOW_PORTAL_ORGS: true</code> to the <code>openunison.non_secret_data</code> :</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>openunison:
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>  non_secret_data:
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>    SHOW_PORTAL_ORGS: &quot;true&quot;
</code></pre></div>
<p>Also, if you haven't updated the <code>k8s_cluster_name</code> option in your values.yaml, you should do that too to denote this is a control plane:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>k8s_cluster_name: openunison-cp
</code></pre></div>
<p>Next, update your helm deployment:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>ouctl install-auth-portal /path/to/balues.yaml
</code></pre></div>
<p>Once the <code>openunison-orchestra</code> pods have restarted, when you login your portal will look different:</p>
<p><img alt="OpenUnison Portal with Orgs" src="../assets/images/ou-portal-orgs.png" /></p>
<p>You'll now see that there is a tree above the links, and that there's an option for "Local Deployment".  Clicking here shows the familiar dashboard
and token links.  You can customize the name of these labels by updateding your values.yaml <code>openunison.non_secret_data</code> section with <code>K8S_DEPLOYMENT_NAME</code> and <code>K8S_DEPLOYMENT_DESC</code> and re-running the <code>ouctl</code> command.</p>
<p>With your control plane ready to add new clusters, the next step is to onboard a new cluster.  You'll need three things:</p>
<ol>
<li>An <a href="../assets/yaml/openunison-satelite-default.yaml">OpenUnison values.yaml</a> with some specific configuration options</li>
<li>The <code>admin.conf</code> (or equivalent) for your satelite cluster</li>
<li>Being logged into your control plane and having that configuration merged with the administrative configuration for your satelite.</li>
</ol>
<p>Your values.yaml file for your satelite will be automatically updated with an <code>oidc</code> section and a any certificates needed to interact with your control plane.  Don't worry about having to determine configure these sections manually.  <strong><em>Your <code>k8s_cluster_name</code> in the satelite's openunison values.yaml must be unique</em></strong>.   Once you have these components, the <code>ouctl</code> command will:</p>
<ol>
<li>Create an identity provider for your new satelite in the control plane OpenUnison</li>
<li>Deploy the satelite OpenUnison to the new satelite cluster, using the control plane OpenUnison as the identity provider</li>
</ol>
<p>To deploy and integrate your satelite:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>kubectl ctx kubernetes-admin@kubernetes
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>kubectl apply -f https://raw.githubusercontent.com/kubernetes/dashboard/v2.5.0/aio/deploy/recommended.yaml
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>ouctl install-satelite /path/to/satelite/openunison/values.yaml admin-user@openunison-control-plane kubernetes-admin@kubernetes
</code></pre></div>
<p>The above commands will first set your context to the remote satelite and install the dashboard.  Next, it will run the <code>ouctl</code> with three parameters:</p>
<ol>
<li>The path to the values.yaml for the satelite instance of OpenUnison</li>
<li>The <code>context.name</code> in your kubectl configuration that points to your control plane cluster</li>
<li>The <code>context.name</code> in your kubectl configuration that points to your satelite cluster</li>
</ol>
<p>There's no secret because the <code>ouctl</code> utility will generate an oidc client secret for you automatically.  The finaly step is to complete the <a href="../deployauth#integrating-your-kubernetes-cluster">integration of your satelite with your cluster</a> if you're satelite will use OIDC for integration.  If it's a managed cluster, you can skip this step.</p>
<p>Once completed, you can login to your control plane and you'll now see your new satelite having its own branch in the tree on the main page:</p>
<p><img alt="OpenUnison with new cluster" src="../assets/images/ou-portal-new-cluster.png" /></p>
<p>Assuming your user is authorized, you can now access the satelite cluster's dashboard and get a token for the satelite cluster.  If using the <code>oulogin</code> kubectl plugin, use the host of the satelite's OpenUnison, not the host of the control plane.  </p>
<h3 id="manual-configuration-steps">Manual Configuration Steps</h3>
<p>When deploying a centralized authentication scheme, you'll run the <code>openunison-k8s-add-cluster</code> helm chart on your constrol plane cluster to create a new identity provider.  Next, you'll configure the managed cluster with it's own OpenUnison orchestra portal, but with your 
control plane cluster's information instead of your central identity provider's information.</p>
<p>Choose a name for your cluster.  The name should be unique in your control plane cluster and will be the name of the release 
for installing the <code>openunison-k8s-add-cluster</code> helm chart.  Next, add a key to your <code>orchestra-secrets-source</code> with a name that starts with 
<code>cluster-idp-</code> and the name of your release and the client secret you want to use for your managed cluster.  In the below example, our managed 
cluster is going to be called <code>cluster01</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>kubectl patch secret orchestra-secrets-source --patch &#39;{&quot;data&quot;:{&quot;cluster-idp-cluster01&quot;:&quot;bXkgc2VjcmV0IGRhdGE=&quot;}}&#39; -n openunison
</code></pre></div>
<p>Next, create a values.yaml file to onboard your new cluster.  Use the below example as a template:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>cluster:
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>  name: cluster01
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>  label: Remote SSO cluster01
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>  description: A cluster with SSO integrated
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>  sso:
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>    enabled: true
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a>    inactivityTimeoutSeconds: 900
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a>  hosts:
<a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a>    portal: k8sou.apps.192-168-2-140.nip.io
<a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a>    dashboard: k8sdb.apps.192-168-2-140.nip.io
<a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a>  az_groups: []
</code></pre></div>
<p>You can list groups in <code>az_groups</code> in the same format as is used by RBAC for your authentication method.  This will limit who can access
 your cluster.  Run the <code>openunison-k8s-add-cluster</code> helm chart:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>helm install cluster01 tremolo/openunison-k8s-add-cluster -n openunison -f /path/to/cluster01-values.yaml
</code></pre></div>
<p>Once deployed, refresh your portal and you'll see a new option underneath <strong>Local Deployment</strong> :</p>
<p><img alt="OpenUnison with new cluster" src="../assets/images/ou-portal-new-cluster.png" /></p>
<p>With your control plane configured, the next step is to deploy OpenUnison to your managed cluster, following the instructions from 
<a href="/deployauth">Deploying The Authentication Portal</a>, specifically the <a href="../deployauth#openid-connect">OIDC</a> section.  Your <code>oidc</code> for your values.yaml 
can be taken from a <code>ConfigMap</code> generated by the <code>openunison-k8as-add-cluster</code> chart named <code>cluster-idp-RELEASE</code> where <code>RELEASE</code> is the name of 
the chart you deployed.  In our example our release is named <code>cluster01</code> so the configmap is named <code>cluster-idp-cluster01</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>kubectl describe configmap sso-config-cluster01 -n openunison                
</code></pre></div>
<p>This generates:
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>Name:         sso-config-cluster01
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>Namespace:    openunison
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>Labels:       app.kubernetes.io/managed-by=Helm
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>Annotations:  meta.helm.sh/release-name: cluster01
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>              meta.helm.sh/release-namespace: openunison
<a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a>
<a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a>Data
<a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a>====
<a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a>oidc-config:
<a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a>----
<a id="__codelineno-8-11" name="__codelineno-8-11" href="#__codelineno-8-11"></a>oidc:
<a id="__codelineno-8-12" name="__codelineno-8-12" href="#__codelineno-8-12"></a>  client_id: cluster-idp-cluster01
<a id="__codelineno-8-13" name="__codelineno-8-13" href="#__codelineno-8-13"></a>  issuer: https://CONTROLPLANE_HOST/auth/idp/cluster-idp-cluster01
<a id="__codelineno-8-14" name="__codelineno-8-14" href="#__codelineno-8-14"></a>  user_in_idtoken: true
<a id="__codelineno-8-15" name="__codelineno-8-15" href="#__codelineno-8-15"></a>  domain: &quot;&quot;
<a id="__codelineno-8-16" name="__codelineno-8-16" href="#__codelineno-8-16"></a>  scopes: openid email profile groups
<a id="__codelineno-8-17" name="__codelineno-8-17" href="#__codelineno-8-17"></a>  claims:
<a id="__codelineno-8-18" name="__codelineno-8-18" href="#__codelineno-8-18"></a>    sub: sub
<a id="__codelineno-8-19" name="__codelineno-8-19" href="#__codelineno-8-19"></a>    email: email
<a id="__codelineno-8-20" name="__codelineno-8-20" href="#__codelineno-8-20"></a>    given_name: given_name
<a id="__codelineno-8-21" name="__codelineno-8-21" href="#__codelineno-8-21"></a>    family_name: family_name
<a id="__codelineno-8-22" name="__codelineno-8-22" href="#__codelineno-8-22"></a>    display_name: name
<a id="__codelineno-8-23" name="__codelineno-8-23" href="#__codelineno-8-23"></a>    groups: groups
<a id="__codelineno-8-24" name="__codelineno-8-24" href="#__codelineno-8-24"></a>Events:  &lt;none&gt;
</code></pre></div></p>
<p>Replace <code>CONTROLPLANE_HOST</code> with the host name for your control plane's OpenUnison.  </p>
<p>Finally, use the value you added to the <code>orchestra-secrets-source</code> <code>Secret</code> on your control plane cluster as your <code>OIDC_CLIENT_SECRET</code> for your new cluster.</p>
<p>Once OpenUnison is running on your new cluster, clicking on either badge will bring you to the dashboard or tokens page for your new cluster.  When using the <a href="../kubectlplugin">oulogin plugin</a> use the host for your new cluster, not your control plane cluster.</p>
<h2 id="links-only">Links Only</h2>
<p>The first step is to enable the tree on the front page of the portal to make it easier to navigate which cluster to access.  In your values.yaml,
add <code>SHOW_PORTAL_ORGS: true</code> to the <code>openunison.non_secret_data</code> :</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>openunison:
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>  non_secret_data:
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>    SHOW_PORTAL_ORGS: &quot;true&quot;
</code></pre></div>
<p>And update your helm deployment:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>helm upgrade orchestra tremolo/orchestra -n openunison -f /path/to/values.yaml
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>helm upgrade orchestra-login-portal tremolo/orchestra-login-portal -n openunison -f /path/to/values.yaml
</code></pre></div>
<p>Once the <code>openunison-orchestra</code> pods have restarted, when you login your portal will look different:</p>
<p><img alt="OpenUnison Portal with Orgs" src="../assets/images/ou-portal-orgs.png" /></p>
<p>You'll now see that there is a tree above the links, and that there's an option for "Local Deployment".  Clicking here shows the familiar dashboard
and token links.  You can customize the name of these labels by updateding your values.yaml <code>openunison.non_secret_data</code> section with <code>K8S_DEPLOYMENT_NAME</code> and <code>K8S_DEPLOYMENT_DESC</code> and re-running the helm upgrades.</p>
<p>To add the links for your new cluster to your control plane cluster, you'll run the <code>openunison-k8s-add-cluster</code> helm chart on your constrol plane cluster to generate the "badges".  </p>
<p>Choose a name for your cluster.  The name should be unique in your control plane cluster and will be the name of the release 
for installing the <code>openunison-k8s-add-cluster</code> helm chart.  </p>
<p>Next, create a values.yaml file to onboard your new cluster.  Use the below example as a template:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>cluster:
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>  name: cluster01
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>  label: Remote SSO cluster01
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>  description: A cluster with SSO integrated
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a>  sso:
<a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a>    enabled: false
<a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a>    inactivityTimeoutSeconds: 900
<a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a>  hosts:
<a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a>    portal: k8sou.apps.192-168-2-140.nip.io
<a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a>    dashboard: k8sdb.apps.192-168-2-140.nip.io
<a id="__codelineno-11-11" name="__codelineno-11-11" href="#__codelineno-11-11"></a>  az_groups: []
</code></pre></div>
<p>You can list groups in <code>az_groups</code> in the same format as is used by RBAC for your authentication method.  This will limit who can access
 your cluster.  Run the <code>openunison-k8s-add-cluster</code> helm chart:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>helm install cluster01 tremolo/openunison-k8s-add-cluster -n openunison -f /path/to/cluster01-values.yaml
</code></pre></div>
<p>Once deployed, refresh your portal and you'll see a new option underneath <strong>Local Deployment</strong> :</p>
<p><img alt="OpenUnison with new cluster" src="../assets/images/ou-portal-new-cluster.png" /></p>
<p>Once OpenUnison is running on your new cluster, clicking on either badge will bring you to the dashboard or tokens page for your new cluster.  When using the <a href="../kubectlplugin">oulogin plugin</a> use the host for your new cluster, not your control plane cluster.</p>
<h3 id="adding-satelite-clusters-to-namespace-as-a-service">Adding Satelite Clusters to Namespace as a Service</h3>
<p>OpenUnison's Namespace as a Service portal also supports onboarding and management of multiple clusters with the same self-service for namespaces.  There is no <code>ServiceAccount</code> token created or needed.  The satelite cluster runs a specialized impersonation proxy that trusts the control plane cluster.  The control plane OpenUnison generates a new, short lived JWT for each request.  When the control plane rotates its signing key, the satelites pick it up automatically.  This is similar to how GitHub Actions may interact with an AWS service without needing a static key.  Onboarding a satelite cluster for NaaS requires a single kubectl configuration file that has cluster-admin access to both clusters.  It also involves updating the satelite's values.yaml to add </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="nt">openunison</span><span class="p">:</span>
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="w">  </span><span class="nt">management_proxy</span><span class="p">:</span>
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="w">    </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="w">    </span><span class="nt">external_admin_group</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">TremoloSecurity/Owners</span>
<a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span class="w">    </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">k8smgmt.apps.212.2.245.93.nip.io</span>
</code></pre></div>
<p>This is assuming you're using external groups in your control plane cluster.  If not, you can skip <code>external_admin_group</code>.  The <code>openunison.management_proxy.host</code> is what you want the host of your management proxy to be.  It should point to your satelite cluster's load balancer.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.1e8ae164.min.js"></script>
      
    
  </body>
</html>